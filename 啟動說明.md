# ğŸš€ å…‰å¾© e äº’åŠ©å¹³å° - å•Ÿå‹•æŒ‡å—

## âœ… å•é¡Œè¨ºæ–·çµæœ

**å·²ä¿®å¾©çš„å•é¡Œï¼š**

1. âœ… `reporting_service.py` çš„ç¨‹å¼ç¢¼é‡è¤‡å’Œç¸®æ’éŒ¯èª¤
2. âœ… è³‡æ–™åº«åˆå§‹åŒ–å•é¡Œ
3. âœ… Windows Reload æ¨¡å¼è¡çªï¼ˆæ”¹ç”¨æ¨™æº–æ¨¡å¼ï¼‰

**æ ¹æœ¬åŸå› ï¼š**

- Windows ç’°å¢ƒä¸‹ uvicorn çš„ `--reload` æ¨¡å¼èˆ‡ multiprocessing æœ‰è¡çª
- ä½¿ç”¨æ¨™æº–æ¨¡å¼å•Ÿå‹•å³å¯æ­£å¸¸é‹è¡Œ

---

## ğŸ¯ å¿«é€Ÿå•Ÿå‹•ï¼ˆæ¨è–¦ï¼‰

### æ–¹æ³•ä¸€ï¼šé›™æ“Šæ‰¹æ¬¡æª”

ç›´æ¥é›™æ“Š `run.bat` æª”æ¡ˆ

### æ–¹æ³•äºŒï¼šå‘½ä»¤è¡Œå•Ÿå‹•

```powershell
.\run.bat
```

---

## ğŸ“ è¨ªå•æœå‹™

å•Ÿå‹•æˆåŠŸå¾Œï¼Œå¯ä»¥è¨ªå•ä»¥ä¸‹ç¶²å€ï¼š

| æœå‹™                      | ç¶²å€                               | èªªæ˜            |
| ------------------------- | ---------------------------------- | --------------- |
| ğŸ  **é¦–é **               | http://localhost:8000/             | API åŸºæœ¬è³‡è¨Š    |
| â¤ï¸ **å¥åº·æª¢æŸ¥**           | http://localhost:8000/health       | æœå‹™ç‹€æ…‹        |
| ğŸ“š **API æ–‡ä»¶ (Swagger)** | http://localhost:8000/api/v1/docs  | äº’å‹•å¼ API æ–‡ä»¶ |
| ğŸ“– **API æ–‡ä»¶ (ReDoc)**   | http://localhost:8000/api/v1/redoc | ç¾åŒ–ç‰ˆ API æ–‡ä»¶ |

---

## ğŸ”§ é–‹ç™¼æ¨¡å¼å•Ÿå‹•

å¦‚æœéœ€è¦ä¿®æ”¹ç¨‹å¼ç¢¼å¾Œè‡ªå‹•é‡è¼‰ï¼ˆé–‹ç™¼æ™‚ä½¿ç”¨ï¼‰ï¼š

### Windows PowerShell æ–¹å¼ï¼š

```powershell
# è¨­ç½®ç’°å¢ƒè®Šæ•¸é¿å… reload å•é¡Œ
$env:PYTHONPATH = "."
python -m uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload --reload-delay 2
```

### ç›´æ¥ä½¿ç”¨ Pythonï¼š

```powershell
python -c "import uvicorn; uvicorn.run('app.main:app', host='0.0.0.0', port=8000, reload=False)"
```

---

## ğŸ—„ï¸ è³‡æ–™åº«ç®¡ç†

### åˆå§‹åŒ–è³‡æ–™åº«

```powershell
python scripts\init_database.py
```

### é‡ç½®è³‡æ–™åº«ï¼ˆæ¸…ç©ºæ‰€æœ‰è³‡æ–™ï¼‰

```powershell
python scripts\init_database.py --reset
```

### è³‡æ–™åº«ä½ç½®

- **æª”æ¡ˆ**: `disaster_relief.db` (SQLite)
- **é¡å‹**: é–‹ç™¼ç’°å¢ƒä½¿ç”¨ SQLite

---

## ğŸ§ª æ¸¬è©¦ API

### ä½¿ç”¨ curl æ¸¬è©¦

```powershell
# å¥åº·æª¢æŸ¥
curl http://localhost:8000/health

# ç²å– API è³‡è¨Š
curl http://localhost:8000/

# æŸ¥çœ‹ä½¿ç”¨è€…åˆ—è¡¨ï¼ˆéœ€è¦ç™»å…¥ï¼‰
curl http://localhost:8000/api/v1/users
```

### ä½¿ç”¨ç€è¦½å™¨

ç›´æ¥è¨ªå• http://localhost:8000/api/v1/docs ä½¿ç”¨äº’å‹•å¼æ–‡ä»¶æ¸¬è©¦

---

## ğŸ”‘ åˆå§‹è¨­å®š

### å‰µå»ºç®¡ç†å“¡å¸³è™Ÿ

```powershell
# ä½¿ç”¨ API æ–‡ä»¶è¨»å†Š
# è¨ªå• http://localhost:8000/api/v1/docs
# æ‰¾åˆ° POST /api/v1/auth/register ç«¯é»
```

### ç’°å¢ƒè®Šæ•¸è¨­å®š

ç·¨è¼¯ `.env` æª”æ¡ˆï¼š

```env
# è³‡æ–™åº«è¨­å®š
ENVIRONMENT=development
DEBUG=true

# JWT è¨­å®š
JWT_SECRET_KEY=your-secret-key-here
ACCESS_TOKEN_EXPIRE_MINUTES=11520

# å¤–éƒ¨æœå‹™ï¼ˆé¸ç”¨ï¼‰
GOOGLE_MAPS_API_KEY=your-api-key
LINE_NOTIFY_TOKEN=your-token
```

---

## âŒ åœæ­¢æœå‹™

åœ¨åŸ·è¡Œ `run.bat` çš„è¦–çª—ä¸­æŒ‰ `Ctrl+C` å³å¯åœæ­¢

æˆ–ä½¿ç”¨ PowerShellï¼š

```powershell
Stop-Process -Name "python" -Force
```

---

## ğŸ› å¸¸è¦‹å•é¡Œæ’é™¤

### å•é¡Œ 1: åŸ è™Ÿè¢«ä½”ç”¨

```
Error: Address already in use
```

**è§£æ±ºæ–¹æ³•ï¼š**

```powershell
# æŸ¥æ‰¾ä½”ç”¨ 8000 port çš„ç¨‹å¼
netstat -ano | findstr :8000

# åœæ­¢è©²ç¨‹å¼ï¼ˆæ›¿æ› PIDï¼‰
taskkill /PID <PID> /F
```

### å•é¡Œ 2: æ¨¡çµ„å°å…¥éŒ¯èª¤

```
ModuleNotFoundError: No module named 'xxx'
```

**è§£æ±ºæ–¹æ³•ï¼š**

```powershell
# å®‰è£ä¾è³´
pip install -r requirements.txt
```

### å•é¡Œ 3: è³‡æ–™åº«éŒ¯èª¤

```
OperationalError: table already exists
```

**è§£æ±ºæ–¹æ³•ï¼š**

```powershell
# é‡ç½®è³‡æ–™åº«
python scripts\init_database.py --reset
```

---

## ğŸ“¦ å®Œæ•´é‡æ–°å®‰è£

å¦‚æœé‡åˆ°ç„¡æ³•è§£æ±ºçš„å•é¡Œï¼š

```powershell
# 1. æ¸…ç†ç’°å¢ƒ
Remove-Item -Recurse -Force venv
Remove-Item disaster_relief.db

# 2. é‡æ–°å»ºç«‹è™›æ“¬ç’°å¢ƒï¼ˆé¸ç”¨ï¼‰
python -m venv venv
.\venv\Scripts\Activate.ps1

# 3. å®‰è£ä¾è³´
pip install -r requirements.txt

# 4. åˆå§‹åŒ–è³‡æ–™åº«
python scripts\init_database.py

# 5. å•Ÿå‹•æœå‹™
.\run.bat
```

---

## ğŸ“š æ›´å¤šè³‡è¨Š

- **å°ˆæ¡ˆæ–‡ä»¶**: `README.md`
- **è³‡æ–™åº«æ–‡ä»¶**: `docs/database_models.md`
- **è¨­è¨ˆæ–‡ä»¶**: `.kiro/specs/disaster-relief-platform/design.md`
- **API æ–‡ä»¶**: http://localhost:8000/api/v1/docsï¼ˆæœå‹™å•Ÿå‹•å¾Œï¼‰

---

## âœ¨ å¿«é€Ÿæ¸¬è©¦æµç¨‹

1. âœ… **å•Ÿå‹•æœå‹™**: åŸ·è¡Œ `run.bat`
2. âœ… **æª¢æŸ¥ç‹€æ…‹**: è¨ªå• http://localhost:8000/health
3. âœ… **æŸ¥çœ‹æ–‡ä»¶**: è¨ªå• http://localhost:8000/api/v1/docs
4. âœ… **è¨»å†Šå¸³è™Ÿ**: ä½¿ç”¨ API æ–‡ä»¶çš„ `/auth/register` ç«¯é»
5. âœ… **ç™»å…¥ç³»çµ±**: ä½¿ç”¨ `/auth/login` ç«¯é»ç²å– Token
6. âœ… **æ¸¬è©¦åŠŸèƒ½**: ä½¿ç”¨ Token æ¸¬è©¦å…¶ä»– API

---

**ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼** ğŸŠ
